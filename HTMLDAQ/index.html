<!--QQstartQQ 
Webpage for controlling the CCD timing and exposure
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
 <meta http-equiv="Content-type" content="text/html;charset=UTF-8"> 
<html>
	
<script type="text/javascript"> function initUpload() {
	/*set the target of the form to the iframe and display the status message on form submit.*/
	document.getElementById('BRAMload').onsubmit=function() {document.getElementById('BRAMload').target = 'BRAMreply';	}
<!--	document.getElementById('TIMEload').onsubmit=function() {document.getElementById('TIMEload').target = 'TIMEreply';	}		-->
	document.getElementById('MCSload').onsubmit=function() {document.getElementById('MCSload').target = 'MCSreply';	}
	document.getElementById('Upload').onsubmit=function() {document.getElementById('Upload').target = 'UploadReply';	}
}
window.onload=initUpload;
</script>

<head>
  <title> CCD Timing </title>
  <script type="text/javascript" src="yahoo.js"></script>
  <script type="text/javascript" src="dom.js"></script>
  <script type="text/javascript" src="event.js"></script>
  <script type="text/javascript" src="conn.js"></script>
  <script type="text/javascript" src="anim.js"></script>
  <script type="text/javascript" src="video_brd.js"></script>
  <link type="text/css" rel="stylesheet" href="main.css">
<script>
function getDate(){
	var d = new Date();
	var mon =("0"+(d.getUTCMonth()+1)).slice(-2);
	var day =("0"+d.getUTCDate()).slice(-2);
	var hour =("0"+d.getUTCHours()).slice(-2);
	var min =("0"+d.getUTCMinutes()).slice(-2);	
	var sec =("0"+d.getUTCSeconds()).slice(-2);	
	var yr  =d.getUTCFullYear();
	var mydate = "'"+yr+"-"+mon+"-"+day+"T"+hour+"-"+min+"-"+sec+"'";
	webserver.adc_form.mydate.value = mydate;
}

</script>
</head>

<body>
<img src="lbl_logo.gif" style="padding-left:4px" width=105 height=75>
<div id="container">
<b class="rtop">
  <b class="r1"></b> <b class="r2"></b> <b class="r3"></b> <b class="r4"></b>
</b>

<h3>Timing</h3>
<form class="forms" id="timing_form" method="post" action="cmd/timing">
	<table class="centerize">
			<tr>
				<td colspan="2"><b> Number of samples</b></td>
				<td colspan="2"><b> Settling Delay</b> </td>
				<td colspan="2"><b> Clock Delay</b> </td>
			</tr>	
			<tr>
				<td>Signal</td>				<td>Reset</td>
				<td>Signal</td>				<td>Reset</td>
				<td>Serial</td>				<td>Sum Well</td><td>Reset</td> <td>Parallel</td>
				
			</tr>
			<tr>
				<td><INPUT TYPE=TEXT NAME="dlya" Value="512"  SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td><INPUT TYPE=TEXT NAME="dlyb" Value="512"  SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td><INPUT TYPE=TEXT NAME="dlyc" Value="40"   SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td><INPUT TYPE=TEXT NAME="dlyd" Value="30"   SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td><INPUT TYPE=TEXT NAME="dlye" Value="30"   SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td><INPUT TYPE=TEXT NAME="dlyf" Value="40"   SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td><INPUT TYPE=TEXT NAME="dlyg" Value="20"   SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td><INPUT TYPE=TEXT NAME="dlyh" Value="2000" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
			</tr>
			<tr>
				<td>DLY1</td><td>DLY2</td><td>DLY3</td><td>DLY4</td>
			</tr>
			<tr>
				<td><INPUT TYPE=TEXT NAME="dlyi" Value="7" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td><INPUT TYPE=TEXT NAME="dlyj" Value="7" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td><INPUT TYPE=TEXT NAME="dlyk" Value="7" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td><INPUT TYPE=TEXT NAME="dlyl" Value="7" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
			</tr>
			<tr>				<td>&nbsp;</td>			</tr>
	</table>
	<table class="leftalign">
			<tr>
				<td>Pixels 	in Image</td>
				<td>X</td>
				<td><INPUT TYPE=TEXT NAME="pixelX" Value="1248" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td>Y</td>
				<td><INPUT TYPE=TEXT NAME="pixelY" Value="1240" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td>Clear columns</td>
				<td><INPUT TYPE=TEXT NAME="clrcol" Value="200"  SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td ><INPUT TYPE="submit" VALUE="CONFIGURE" STYLE="width: 1.03in; height: 0.28in"></td>
			</tr>
			<tr>
				<td colspan="2">Truncate bits (max10)</td>
				<td><INPUT TYPE=TEXT NAME="averaging" Value="9"    SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td>Digital offset</td>
				<td><INPUT TYPE=TEXT NAME="digoff"    Value="5000" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td>Expose time</td>
				<td><INPUT TYPE=TEXT NAME="exptim"    Value="5000" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
				<td><INPUT TYPE=TEXT NAME="config"    Value="???"  SIZE=8 STYLE="width: 0.45in; background-color: #FFDAB9	" maxlength="8"></td>
			</tr>
		</table>
		</form>
		<form  class="rightalign" id="BRAMload" method="post" enctype="multipart/form-data" action="cmd/FILExhrBRAM" >
			<p>Timing File 
					<input name="BRAM_File" id="file" size="27" type="file" />
					<input type="submit" name="action" value="Upload" />
					<iframe id="BRAMreply" width="60" height="40" frameborder="0" align="middle" name="BRAMreply"></iframe></p>
		</form>
<!--		<form  class="rightalign" id="TIMEload" method="post" enctype="multipart/form-data" action="cmd/FILExhrTIME" >				
			<p>Timing Settings 
					<input name="TIME_File" id="file" size="27" type="file" />
					<input type="submit" name="action" value="Upload" />
					<iframe id="TIMEreply" width="60" height="20" frameborder="0" align="top" name="TIMEreply"></iframe></p>
		</form>		-->
<h1>ADC Conversion Settings</h1>
<div class="adclike">
	<form class="forms" id="adc_form" method="post" action="cmd/adc">
	<input type="hidden" Name="mydate" value="0">				
		<table class="leftalign">
			<tr>
				<td><INPUT TYPE="submit" VALUE="CCD read" onclick="getDate()" STYLE="width: 1.03in; height: 0.28in"></td>
				<td colspan="2"><input type="button" value="Download" onClick="window.location.href='image.fits'" STYLE="width: 1.03in; height: 0.28in"></td>	
				<td><INPUT TYPE=TEXT NAME="reply" Value="???" SIZE=4 STYLE="width: 0.96in; background-color: #FFDAB9	" maxlength="8"></td>
				<td><div class="progressbar" STYLE="width: 100%; height: 20px; border: 1px solid black">
				<div id="bar"STYLE="width: 0%; height: 20px; border-right: 1px solid black; background: #6699FF"></div>
				<div id="percent"STYLE="width: 150px; text-align: center; color: black;"></div></td>
			</tr>
			<tr>
				<td><input type="button" id="ccdclear" VALUE="Clear" STYLE="width: 1.03in; height: 0.28in">
				<input type=checkbox name="enclr" checked= checked> </td>
				<td><input type="button" id="ccderase"VALUE="Erase" STYLE="width: 1.03in; height: 0.28in">
				<input type=checkbox name="enera" checked= checked> </td>
				<td><input type="button" id="ccdepurge"VALUE="Epurge" STYLE="width: 1.03in; height: 0.28in">
				<input type=checkbox name="enpur" checked= checked> </td>
				<td><input type="button" id="bufdiscard" VALUE="Discard" STYLE="width: 1.03in; height: 0.28in"></td>
			</tr>
			<tr>
				<td><input type="button" id="idle" VALUE="Idle" STYLE="width: 1.03in; height: 0.28in"></td>
				<td><INPUT TYPE=TEXT NAME="idlestat" Value="???" SIZE=4 STYLE="width: 0.96in; background-color: #FFDAB9	" maxlength="8"></td>
			<!--<td><input type="button" id="dacval" VALUE="DAC Read" STYLE="width: 1.03in; height: 0.28in"></td>-->
				<td></td>
				<td><input type="button" id="abort" VALUE="Abort" STYLE="width: 1.03in; height: 0.28in"></td>
				<td><input type="button" id="prepare" VALUE="Prepare" STYLE="width: 1.03in; height: 0.28in"></td>
			</tr>
		</table>
	</form>
</div>
<h1>Live Noise</h1>
<form class="forms" id="noise_form" method="post" action="cmd/noise">				
	<table class="centerize">
		<tr>
			<td>&nbsp;</td><td>&nbsp;</td><td>Channel 1</td><td>Channel 2</td><td>Channel 3</td><td>Channel 4</td>
		</tr>
		<tr>
			<td><input type="button" id="nomode" VALUE="Noisemode" STYLE="width: 1.03in; height: 0.28in"></td>
			<td><INPUT TYPE=TEXT NAME="nomodestat" Value="Noisemode Off" SIZE=4 STYLE="width: 1.03in; background-color: #FFDAB9	" maxlength="8"></td>
			<td><INPUT TYPE=TEXT NAME="noise01" Value="???" SIZE=4 STYLE="width: 1.03in; background-color: #FFDAB9" maxlength="6" readonly></td>
			<td><INPUT TYPE=TEXT NAME="noise02" Value="???" SIZE=4 STYLE="width: 1.03in; background-color: #FFDAB9" maxlength="6" readonly></td>
			<td><INPUT TYPE=TEXT NAME="noise03" Value="???" SIZE=4 STYLE="width: 1.03in; background-color: #FFDAB9" maxlength="6" readonly></td>
			<td><INPUT TYPE=TEXT NAME="noise04" Value="???" SIZE=4 STYLE="width: 1.03in; background-color: #FFDAB9" maxlength="6" readonly></td>
		</tr>
	</table>
</form>
<h1>	Debug</h1>
<div class="adcreg">
	<table class="leftalign">
		<form class="forms" id="adc_deb" method="post" action="cmd/deb">
			<tr>
				<td><b>Temperature Sensor</b></td>
				<td><input type="button" id="get_temperature" VALUE="Temperature" STYLE="width: 1.03in; height: 0.28in" ></td>
				<td></td>
				<td><INPUT TYPE=TEXT NAME="show_temperature" Value="?" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="2"></td>
				<td>&deg;C</td>
				<td><INPUT TYPE=TEXT NAME="show_temperature_extern" Value="?" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="2"></td>
				<td>&deg;C</td>
			</tr>	<tr>
			<td><b>ADC register</b></td>
				<td><input type="submit"  value="Update ADC" STYLE="width: 1.03in; height: 0.28in"></td>
				<td>Address 0x</td>
				<td><INPUT TYPE=TEXT NAME="adcaddr" Value="26" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="2"></td>
				<td>Data 0x</td>
				<td><INPUT TYPE=TEXT NAME="regdat" Value="3aaa" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="4"></td>
				<td></td><td></td><td></td><td></td><td></td><td></td>
				<td><INPUT TYPE=TEXT NAME="reply" Value="???" SIZE=4 STYLE="width: 0.96in; background-color: #FFDAB9	" maxlength="12"></td>
			</tr>
	</form>
	<form class="forms" id="filbuf" method="post" action="cmd/filbuf" >
			<tr>
				<td><b>Fill buffer</b></td>
				<td><input type="submit" VALUE="Fill Buffer" STYLE="width: 1.03in; height: 0.28in"></td>
				<td align="right">Value 0x</td>
				<td><INPUT TYPE=TEXT NAME="fillvalue" Value="0" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="4"></td>
				<td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
				<td><input type="button" id="reboot"VALUE="Reboot" STYLE="width: 1.03in; height: 0.28in" ></td>
			</tr>
		</form>
	</table>
<h1>Upload</h1>
		<table class="leftalign">
			<form  class="leftalign" id="MCSload" method="post" enctype="multipart/form-data" action="cmd/FILExhrMCS" >
				<tr>
					<td><b>MCS File</b></td>
					<td><input name="MCS_File" id="file" size="27" type="file" /></td>
					<td>&nbsp;</td>
					<td><b>Choose bit or elf</b></td>
					<td><INPUT TYPE=TEXT NAME="mcsselect" Value="???" SIZE=4 STYLE="width: 0.45in; text-align: center" maxlength="6"></td>
					<td><input type="submit" name="action" value="Update MCS" /></td>
					<td><iframe id="MCSreply" width="60" height="40" frameborder="0" align="middle" name="MCSreply"></iframe></td>
				</tr>
			</form>
			<form  class="leftalign" id="Upload" method="post" enctype="multipart/form-data" action="cmd/FILExhrUpload" >
				<tr>
					<td><b>Upload File</b></td>
					<td><input name="upload-file" id="file" size="27" type="file" /></td>
					<td></td><td></td><td></td>
					<td><input type="submit" name="action" STYLE="width: 1.05in" value="Start Upload" /></td>
					<td><iframe id="UploadReply" width="60" height="40" frameborder="0" align="middle" name="UploadReply"></iframe></td>
				</tr>
			</form>
				<tr>
					<td><b>Set new default values</b></td>
					<td><input type="button" id="mfs_to_flash"VALUE="Update Flash" STYLE="width: 1.03in; height: 0.28in" ></td>
					<td colspan="2"><input type="button" value="DACReadback" name="button" id="dacread" STYLE="width: 1.03in; height: 0.28in"></td>
				</tr>
		</table>
</div>	
<br>
<a href="clkboard.html">Clock Board</a>
<br>
<b class="rbottom">
  <b class="r4"></b> <b class="r3"></b> <b class="r2"></b> <b class="r1"></b>
  <br> 
</b>

</div>
</body>
</html>
<!--QQendQQ-->
